---
import Layout from '@/layouts/Layout.astro';
import styles from './styles.module.scss';
---

<Layout title="Welcome to Astro." />
<div class="wrapper">
  <div class={styles.container}>
    <div class="modal" data-modal>
      <button type="button" class="information-button" data-modal-open>モーダルオープン</button>

      <dialog class="modal-content" data-modal-content="close">
        <button type="button" class="modal-close-button" data-close-button>×</button>
        <div class="modal-content-inner">
          <h1 class="modal-heading">これは見出しです。</h1>
          <p class="modal-text">
            ここはテキストが入ります。ここはテキストが入ります。ここはテキストが入ります。ここはテキストが入ります。ここはテキストが入ります。
            ここはテキストが入ります。ここはテキストが入ります。
          </p>
        </div>
      </dialog>
    </div>
    <!-- /.modal -->
  </div>
  <!-- /.container -->
</div>
<!-- /.wrapper -->

<style lang="scss">
  // =================================================
  // components modal
  // =================================================

  html:has(dialog[open]) {
    overflow: hidden;
  }

  .modal {
    position: relative;
    z-index: 1000;

    &-content {
      position: fixed;
      width: calc(100vw - 3.2rem);
      max-width: 32rem;
      margin: auto;
      padding: 0;
      background-color: transparent;
      border: 0;
      transition-duration: 0.3s;
      transition-property: opacity, transform;
      inset: 0;

      // 背景色の設定
      &::backdrop {
        background-color: rgba(255, 255, 255, 0.9);
        transition-duration: 0.3s;
        transition-property: opacity;
      }
    }

    &-content-inner {
      position: relative;
      padding-top: 3rem; // クローズボタンの分だけ余白を取る
    }

    &-close-button {
      position: absolute;
      top: 0;
      right: 0;
      width: 2.5rem;
      height: 2.5rem;
      z-index: 1;

      &:focus-visible {
        outline: 2px solid var(--color-blue);
      }
    }
  }

  // ========================
  // JS処理
  [data-modal-content='close'] {
    opacity: 0;

    &::backdrop {
      opacity: 0;
    }
  }

  [data-modal-open] {
    &:focus-visible {
      border: 2px solid blue;
    }
  }
</style>
